<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lucky Draw</title>

<style>
/* ---------------- base ---------------- */
body {
  margin: 0;
  background: #c2dff5;
  font-family: "futura", "pretendard", "helvetica";
  color: #111;
  overflow-x: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

/* ---------------- fixed UI ---------------- */
.logo {
  position: fixed;
  top: 30px;
  right: 30px;
  z-index: 10;
}
.logo img {
  width: 80px;
}

.back {
  position: fixed;
  top: 30px;
  left: 30px;
  font-size: 12px;
  text-decoration: none;
  color: inherit;
  opacity: 0.7;
  border: 1px solid #111;
  border-radius: 999px;
  padding: 6px 14px;
  z-index: 10;
}
.back:hover {
  opacity: 1;
  background: rgba(0,0,0,0.05);
}

/* ---------------- draw image ---------------- */
.draw-trigger {
  cursor: pointer;
}
.draw-trigger img {
  width: 400px;
  transition: transform .2s ease;
}
.draw-trigger:hover img {
  transform: translateY(-6px);
}

/* ---------------- popup ---------------- */
.popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 20;
}

/* ---------------- letter ---------------- */
.letter {
  width: 320px;
  background: #fff;
  padding: 34px 28px 30px;
  text-align: center;
  font-size: 10px;
  border-radius: 6px;
  transform-origin: top center;
  animation: paperOpen .6s cubic-bezier(.22,1.1,.36,1);
  box-shadow:
    0 14px 32px rgba(0,0,0,.18),
    inset 0 1px 0 rgba(255,255,255,.6);
}

/* grade colors */
.letter.í‹°ì…”ì¸  { background: #ffe969; }
.letter.íƒ€ì›”ìŠ¬ë¡œê±´ { background: #ffad7d; }
.letter.pvcíŒŒìš°ì¹˜ { background: #92d2ff; }
.letter.ì¿ ì…˜í‚¤ë§ { background: #b9e2be; }
.letter.í•€ë±ƒì§€ { background: #ff9cb5; }
.letter.ì—½ì„œì„¸íŠ¸ { background: #cbc4fe; }
.letter.ìŠ¤í‹°ì»¤ { background: #f0ede8; }

/* paper animation */
@keyframes paperOpen {
  0% {
    transform: scaleY(.6) rotateX(-25deg);
    opacity: 0;
  }
  60% {
    transform: scaleY(1.05) rotateX(8deg);
    opacity: 1;
  }
  100% {
    transform: scaleY(1) rotateX(0deg);
  }
}

/* ì´ë¯¸ì§€ + í…ìŠ¤íŠ¸ ê²¹ì¹¨ ë˜í¼ */
.letter-visual-wrap {
  position: relative;
  margin: 16px 0 10px;
}

/* í¸ì§€ ì´ë¯¸ì§€ */
.letter-visual {
  width: 100%;
  display: block;
}

/* âœ¨ ë‹¹ì²¨ í…ìŠ¤íŠ¸ (ê²¹ì³ì„œ ìœ„ì—) */
.grade {
  position: absolute;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 20px;
  font-weight: 700;
  letter-spacing: 0.02em;
  color: #111;
  text-shadow:
    0 2px 6px rgba(255,255,255,0.6),
    0 1px 0 rgba(255,255,255,0.9);
  pointer-events: none;
}

.count {
  font-size: 12px;
  opacity: .75;
}

button {
  margin-top: 22px;
  padding: 8px 18px;
  border: 1px solid #111;
  background: none;
  cursor: pointer;
}
</style>
</head>

<body>

<a href="index.html" class="back">Back</a>

<div class="logo">
  <img src="https://buly.kr/FhPFVd6" alt="logo">
</div>

<!-- ğŸ í´ë¦­ìš© ë°•ìŠ¤ ì´ë¯¸ì§€ -->
<div class="draw-trigger" id="drawBtn">
  <img src="https://buly.kr/90cSIXz" alt="Lucky Draw Box">
</div>

<!-- ğŸ“œ popup -->
<div class="popup" id="popup">
  <div class="letter">
    <div class="letter-visual-wrap">
     <img class="letter-visual" src="https://buly.kr/G3ElTFD" alt="gift visual">
     <div class="grade" id="result"></div>
    </div>
    <div class="count" id="remain"></div>
    <button onclick="closePopup()">OK</button>
  </div>
</div>

<script>
/* ğŸ prize pool */
const prizePool = [
  ...Array(3).fill('í‹°ì…”ì¸ '),
  ...Array(5).fill('íƒ€ì›”ìŠ¬ë¡œê±´'),
  ...Array(16).fill('pvcíŒŒìš°ì¹˜'),
  ...Array(36).fill('ì¿ ì…˜í‚¤ë§'),
  ...Array(50).fill('í•€ë±ƒì§€'),
  ...Array(100).fill('ì—½ì„œì„¸íŠ¸'),
  ...Array(150).fill('ìŠ¤í‹°ì»¤')
];

/* shuffle */
for (let i = prizePool.length - 1; i > 0; i--) {
  const j = Math.floor(Math.random() * (i + 1));
  [prizePool[i], prizePool[j]] = [prizePool[j], prizePool[i]];
}

/* count remain */
function countRemain() {
  const map = {};
  prizePool.forEach(p => map[p] = (map[p] || 0) + 1);
  return map;
}

const drawBtn = document.getElementById('drawBtn');
const popup = document.getElementById('popup');
const result = document.getElementById('result');
const remain = document.getElementById('remain');
const letter = document.querySelector('.letter');

drawBtn.addEventListener('click', () => {
  if (prizePool.length === 0) {
    result.textContent = 'ALL OUT';
    remain.textContent = 'ëª¨ë“  ëŸ­í‚¤ë“œë¡œìš°ê°€ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤.';
    popup.style.display = 'flex';
    return;
  }

  const prize = prizePool.pop();
  const counts = countRemain();

  /* animation reset */
  letter.style.animation = 'none';
  letter.offsetHeight;
  letter.style.animation = '';

  letter.className = `letter ${prize}`;
  result.innerHTML = `${prize} ë‹¹ì²¨!`;
  remain.textContent =
    'ë‚¨ì€ ìˆ˜ëŸ‰: ' +
    Object.entries(counts)
      .map(([k,v]) => `${k}:${v}`)
      .join(' / ');

  popup.style.display = 'flex';
});

function closePopup() {
  popup.style.display = 'none';
}
</script>

</body>
</html>
